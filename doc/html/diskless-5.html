<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2 Final//EN">
<HTML>
<HEAD>
 <META NAME="GENERATOR" CONTENT="SGML-Tools 1.0.9">
 <TITLE>SLUG talk: Setting up a diskless Linux system: RH5 configuration</TITLE>
 <LINK HREF="diskless-6.html" REL=next>
 <LINK HREF="diskless-4.html" REL=previous>
 <LINK HREF="diskless.html#toc5" REL=contents>
</HEAD>
<BODY>
<A HREF="diskless-6.html">Next</A>
<A HREF="diskless-4.html">Previous</A>
<A HREF="diskless.html#toc5">Contents</A>
<HR>
<H2><A NAME="RH5"></A> <A NAME="s5">5. RH5 configuration</A></H2>

<P>
<P>The DC requests to mount <CODE>/tftpboot/</CODE><I>&lt;IP address of DC></I>
(in 2.1 and above: <CODE>/tftpboot/</CODE><I>&lt;name of DC in bootptab></I>)
as its <CODE>/</CODE> by NFS from server. You must export this from the
server <CODE>(rw, no_root_squash)</CODE> because the DC wants to write on it
(log files, etc).
<P>
<P>
<P>The <CODE>/</CODE> must contain <CODE>/sbin, /bin, /lib, /etc, /var, /tmp,
/root, /dev</CODE> and <CODE>/proc</CODE>.
<P>
<P>
<P><CODE>/sbin, /bin, /lib/</CODE> can be a copy of an existing RH5 system. They
can be shared between all DCs. But hard links only. BTW, don't link to
server originals.
<P>
<P>
<P><CODE>/etc, /var</CODE> and <CODE>/dev</CODE> should be
non-sharable copies. Customise <CODE>/etc/sysconfig/network,
/etc/sysconfig/network-scripts/ifcfg-eth0, /etc/fstab,
/etc/conf.modules</CODE>, and others. Turn off all network services you
don't need. Remove all stuff you don't need from <CODE>/var</CODE>, e.g.
RPM db, lpd files.
<P>
<P>
<P><CODE>/root</CODE> and <CODE>/proc</CODE> should just exist. <CODE>/tmp</CODE>
should exist and be mode 1777.
<P>
<P>
<P>You probably want to create <CODE>/usr</CODE> and <CODE>/home</CODE> mount
points. <CODE>/usr</CODE> can be mounted ro.
<P>
<P>
<P>About 10 MB per DC plus about 15 MB of shared files should be sufficient.
BTW: if your DCs are quite similar, the kernel image can also be shared.
<P>
<P>
<P>Here is an illustrative 
<A HREF="nfsrootinit.txt">script</A>
to create the first root filesystem. Here is an illustrative 
<A HREF="nfsrootdup.txt">script</A> to duplicate the root filesystem.
<P>
<HR>
<A HREF="diskless-6.html">Next</A>
<A HREF="diskless-4.html">Previous</A>
<A HREF="diskless.html#toc5">Contents</A>
</BODY>
</HTML>
